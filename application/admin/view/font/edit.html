{extend name="base" /}
{block name="body"}
    <div class="layui-tab-content">
        <div class="layui-tab-item layui-show">
            <form class="layui-form form-container" action="{:url('admin/font/update')}" method="post">
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span> 字体名称</label>
                    <div class="layui-input-block">
                        <input type="text" name="name" value="{$font.name}" required  lay-verify="required" placeholder="请输入字体名称" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span> 字体分类</label>
                    <div class="layui-input-block">
                        <select name="category_id"  lay-filter="category_id" id="category_id"  lay-verify="required">
                            <option value="">选择字体分类</option>
                            {foreach name="font_category_list" item="vo"}
                                <option {if condition=" $font.category_id==$vo.id "} selected="selected" {/if} value="{$vo.id}">{$vo.name}</option>
                            {/foreach}
                        </select>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span> 字体文件</label>
                    <div class="layui-input-block">
                        <div class="layui-inline" style="width:80%">
                            <input type="text" name="file_path" value="{$font.file_path}" required lay-verify="required" readonly class="layui-input">
                        </div>
                        <button type="button" class="layui-btn layui-btn-danger" id="file_path">
                        <i class="layui-icon layui-icon-upload"></i> 上传字体
                        </button>
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label">字体描述</label>
                    <div class="layui-input-block">
                        <input type="text" name="remark" value="{$font.remark}" required  lay-verify="required" placeholder="请输入字体描述" class="layui-input">
                    </div>
                </div>

                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span> 字体排序</label>
                    <div class="layui-input-block">
                        <input type="number" name="index_sort" value="{$font.index_sort}" required  lay-verify="required" placeholder="请输入字体排序" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label"><span style="color: red;">*</span> 字体状态</label>
                    <div class="layui-input-block">
                        <input type="radio" name="status" value="1" title="启用" {if condition="$font.status==1"} checked="checked"{/if}>
                        <input type="radio" name="status" value="0" title="禁用" {if condition="$font.status==0"} checked="checked"{/if}>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <input type="hidden" name="id" value="{$font.id}">
                        <button class="layui-btn" lay-submit lay-filter="*">更新</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
{/block}

{block name="script"}
<script>
    layui.use(function(){
    var upload = layui.upload;
    var layer = layui.layer;
    // 渲染
    upload.render({
        elem: '#file_path',
        url: '{$uploadurl}', // 此处配置你自己的上传接口即可
        accept:"file",
        size: 60000,         // 限制文件大小，单位 KB
        before: function(obj){
            // 上传前回调
            // 显示 loading
            this.index = layer.load(1, {shade: [0.9, '#fff']}); // 0.1透明度的白色背景
        },
        done: function(res){
            // 上传完毕回调
            layer.close(this.index); // 关闭 loading
            layer.msg('上传成功');
            $("input[name=file_path]").val(res.url);
        },
        error: function(){
            // 请求异常回调
            layer.msg('字体文件上传失败');
            layer.close(this.index); // 关闭 loading
        }
    });
    });
</script>
{/block}